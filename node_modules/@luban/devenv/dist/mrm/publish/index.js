"use strict";
const mrm_core_1 = require("mrm-core");
const task = function publish() {
    const pkgJson = mrm_core_1.packageJson();
    const name = pkgJson.get("name", "");
    if (name === "") {
        throw new mrm_core_1.MrmError("Package name is not defined");
    }
    if (name.startsWith("@")) {
        if (!name.startsWith("@luban")) {
            throw new mrm_core_1.MrmError("Package should belong to @luban scope");
        }
    }
    else {
        pkgJson.set("name", `@luban/${name}`);
    }
    pkgJson
        .set("types", "dist/index.d.ts")
        .appendScript("prepublishOnly", "yarn build:clean")
        .set("publishConfig.registry", "http://192.168.13.238:8081/repository/npm-luban/")
        .save();
    mrm_core_1.lines(".npmignore").add("!dist/").save();
};
task.description = "Add publish config for Luban developer";
module.exports = task;
//# sourceMappingURL=index.js.map